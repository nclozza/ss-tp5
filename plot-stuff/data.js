var times = [
  0.5669400000000546,
  0.5689500000000455,
  0.571470000000034,
  0.5752500000000168,
  0.5804399999999932,
  0.5830499999999813,
  0.6051999999998805,
  0.6058599999998775,
  0.6256799999997873,
  0.6307699999997641,
  0.6405299999997197,
  0.6467199999996915,
  0.65145999999967,
  0.6610399999996264,
  0.6661499999996031,
  0.6920499999994852,
  0.7229399999993447,
  0.7342599999992931,
  0.7483099999992292,
  0.8352099999988337,
  0.8461799999987838,
  0.8800199999986298,
  0.8904299999985824,
  0.9163599999984644,
  0.9183399999984554,
  0.9334199999983868,
  0.9424299999983458,
  0.94588999999833,
  0.9551699999982878,
  0.9653699999982414,
  0.9699399999982206,
  0.9783399999981823,
  0.9868999999981434,
  0.9940599999981108,
  1.0039399999981096,
  1.012089999998163,
  1.031329999998289,
  1.0926599999986908,
  1.2803399999999203,
  1.285329999999953,
  1.2857299999999556,
  1.2902699999999854,
  1.3020100000000623,
  1.3091100000001088,
  1.316460000000157,
  1.3233600000002022,
  1.3323200000002609,
  1.334770000000277,
  1.3614700000004518,
  1.3712200000005157,
  1.3961900000006793,
  1.4287800000008928,
  1.4358700000009392,
  1.438730000000958,
  1.4566900000010756,
  1.5391200000016156,
  1.5516500000016977,
  1.5569900000017327,
  1.5620400000017658,
  1.5768300000018627,
  1.5780000000018704,
  1.5861200000019235,
  1.5935400000019722,
  1.6072800000020622,
  1.7133000000027567,
  1.7480800000029846,
  1.7612500000030709,
  1.7685000000031184,
  1.776080000003168,
  1.7766100000031715,
  1.7836300000032175,
  1.7975000000033083,
  1.7976300000033092,
  1.8106800000033947,
  1.811350000003399,
  1.8486100000036432,
  1.851490000003662,
  1.8680500000037705,
  1.8689900000037767,
  1.87865000000384,
  1.8935800000039378,
  1.893780000003939,
  1.9116500000040562,
  1.9233500000041328,
  1.9332700000041978,
  1.9411700000042496,
  1.9494600000043039,
  1.9657000000044103,
  1.9677200000044235,
  1.9837700000045286,
  2.0006900000046395,
  2.04200000000491,
  2.042320000004912,
  2.062710000005046,
  2.0641600000050553,
  2.064560000005058,
  2.0862600000052,
  2.090520000005228,
  2.112480000005372,
  2.120890000005427,
  2.1321300000055006,
  2.1437500000055767,
  2.152630000005635,
  2.164580000005713,
  2.175820000005787,
  2.2142000000060382,
  2.235240000006176,
  2.282070000006483,
  2.283940000006495,
  2.295810000006573,
  2.320430000006734,
  2.3313100000068054,
  2.332480000006813,
  2.337800000006848,
  2.3502200000069293,
  2.3608100000069987,
  2.366330000007035,
  2.3741000000070858,
  2.3952900000072246,
  2.420110000007387,
  2.431530000007462,
  2.5167400000080202,
  2.532730000008125,
  2.534900000008139,
  2.542800000008191,
  2.5543700000082668,
  2.5624200000083195,
  2.577900000008421,
  2.5845300000084643,
  2.616520000008674,
  2.6408500000088333,
  2.674570000009054,
  2.7044000000092496,
  2.711200000009294,
  2.7622500000096286,
  2.77771000000973,
  2.7927300000098283,
  2.802300000009891,
  2.8032700000098973,
  2.816630000009985,
  2.8243800000100356,
  2.838450000010128,
  2.8466500000101815,
  2.8692700000103297,
  2.885780000010438,
  2.8872500000104475,
  2.8993200000105266,
  2.9076600000105812,
  2.9123100000106117,
  2.9385700000107837,
  2.972930000011009,
  2.975550000011026,
  2.9858400000110934,
  2.9999100000111856,
  3.0097000000112497,
  3.010210000011253,
  3.0147100000112825,
  3.062100000011593,
  3.149400000012165,
  3.167610000012284,
  3.1821200000123793,
  3.2870000000130664,
  3.293020000013106,
  3.3134300000132395,
  3.3162100000132577,
  3.3265200000133253,
  3.351990000013492,
  3.378220000013664,
  3.4192000000139324,
  3.4283600000139924,
  3.4488200000141265,
  3.461400000014209,
  3.48753000001438,
  3.5306500000146626,
  3.5463400000147653,
  3.562600000014872,
  3.5854000000150212,
  3.5963200000150928,
  3.6011800000151246,
  3.610420000015185,
  3.622790000015266,
  3.6663500000155516,
  3.6784400000156308,
  3.6813400000156498,
  3.7501000000161,
  3.783190000016317,
  3.785040000016329,
  3.831590000016634,
  3.832770000016642,
  3.8465000000167318,
  3.912800000017166,
  3.9302800000172806,
  3.940110000017345,
  3.9406200000173484,
  3.9708800000175466,
  3.994750000017703,
  3.997490000017721,
  3.9982000000177256,
  4.001680000017673,
  4.020240000016971,
  4.051060000015804,
  4.051130000015801,
  4.110510000013553,
  4.123100000013077,
  4.125800000012974,
  4.155050000011867,
  4.163900000011532,
  4.175080000011109,
  4.17927000001095,
  4.180280000010912,
  4.214870000009602,
  4.218670000009459,
  4.235370000008826,
  4.2523500000081835,
  4.260860000007861,
  4.294790000006577,
  4.401570000002534,
  4.4141400000020585,
  4.43260000000136,
  4.4495100000007195,
  4.456280000000463,
  4.457020000000435,
  4.492049999999109,
  4.510649999998405,
  4.529639999997686,
  4.558029999996611,
  4.558159999996606,
  4.568249999996224,
  4.587529999995494,
  4.598579999995076,
  4.607249999994748,
  4.6532999999930045,
  4.667289999992475,
  4.67507999999218,
  4.678029999992068,
  4.686509999991747,
  4.706019999991009,
  4.766939999988702,
  4.80793999998715,
  4.819219999986723,
  4.833509999986182,
  4.8884699999841015,
  4.902829999983558,
  4.929379999982553,
  4.932069999982451,
  4.934159999982372,
  4.957579999981485,
  4.95770999998148,
  4.99389999998011,
  4.994489999980088,
  5.010079999979498,
  5.02005999997912,
  5.06151999997755,
  5.071619999977168,
  5.0724999999771345,
  5.089639999976486,
  5.089939999976474,
  5.096969999976208,
  5.107159999975822,
  5.117229999975441,
  5.183489999972933,
  5.202479999972214,
  5.232109999971092,
  5.2354799999709645,
  5.362699999966148,
  5.363159999966131,
  5.375109999965678,
  5.39936999996476,
  5.40597999996451,
  5.42365999996384,
  5.424569999963806,
  5.472619999961987,
  5.473049999961971,
  5.480149999961702,
  5.496519999961082,
  5.539709999959447,
  5.550249999959048,
  5.550539999959037,
  5.55784999995876,
  5.567929999958379,
  5.593909999957395,
  5.6245399999562355,
  5.625589999956196,
  5.6285299999560845,
  5.646949999955387,
  5.653389999955143,
  5.678799999954181,
  5.692629999953658,
  5.695969999953531,
  5.700409999953363,
  5.7126399999529,
  5.713619999952863,
  5.721929999952549,
  5.7243099999524585,
  5.733199999952122,
  5.733959999952093,
  5.766099999950876,
  5.820339999948823,
  5.8211999999487904,
  5.85422999994754,
  5.882079999946486,
  5.882089999946485,
  5.906559999945559,
  5.923099999944933,
  5.950539999943894,
  5.956549999943666,
  5.9927099999422975
];

var endTime = 6; // seconds
var stepSize = 0.05;

var xAxis = [...new Array(endTime / stepSize)].map(
  (_, index) => index * stepSize
);

var yAxis = xAxis.map(
  time =>
    times.filter(collTime => collTime >= time && collTime < time + stepSize)
      .length
);

// var table = xAxis
//   .map((x, i) => [x, yAxis[i]])
//   .map(([x, y]) => `${x.toFixed(2)},${y}`)
//   .join('\n')

function sum(numbers) {
  return numbers.reduce((a, b) => a + b, 0);
}

function average(numbers) {
  return sum(numbers) / (numbers.length || 1);
}

var window_ = size => (_number, index, array) => {
  const start = Math.max(0, index - size);
  const end = Math.min(array.length, index + size);
  return array.slice(start, end);
};

function movingAverage(numbers, num) {
  return numbers
    .map(window_(num))
    .map(average)
    .map(x => (x / stepSize) * 4);
}

var movingY = movingAverage(yAxis, 20);

var table = xAxis
  .map((x, i) => [x, movingY[i]])
  .map(([x, y]) => `${x.toFixed(2)},${y.toFixed(2)}`)
  .join("\n");

console.log(table);
